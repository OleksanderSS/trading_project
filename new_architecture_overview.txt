### Опис Нової Архітектури Системи

Нова архітектура побудована навколо чотирьох основних скриптів у кореневій папці проекту. Вони є нашими єдиними точками входу для всіх операцій.

**1. Головні Скрипти-Оркестратори (в корені проекту):**

*   `run_data_pipeline.py`:
    *   **Призначення:** Єдиний скрипт для всіх операцій з даними. Він збирає, обробляє та створює ознаки (features).
    *   **Як працює:** Послідовно запускає "етапи" (stages) з папки `core/stages`. Результат його роботи — готові датасети для моделювання в `data/processed`.

*   `run_dual_simulation.py`:
    *   **Призначення:** Запускає основний симулятор торгових стратегій. Цей підхід тестує дві "команди" моделей (важку та легку) на історичних даних.
    *   **Як працює:** Використовує логіку з `core/tools/dual_path_simulator.py`, завантажує дані з `data/processed` і зберігає результати симуляції в `data/results`.

*   `run_robust_feature_selection.py`:
    *   **Призначення:** Запускає альтернативний симулятор для надійного відбору ознак. Він оцінює стабільність та важливість кожної ознаки.
    *   **Як працює:** Використовує логіку з `core/tools/robust_feature_simulator.py` для оцінки груп ознак, визначених у `config/feature_sets.py`.

*   `run_convergence_analysis.py`:
    *   **Призначення:** Аналізує результати, отримані з симуляцій.
    *   **Як працює:** Використовує `core/tools/convergence_analyzer.py` для аналізу файлів у `data/results` та генерує звіти/візуалізації.

**2. Ключові Модулі (`core`):**

*   `core/stages/`:
    *   **Призначення:** Містить атомарні, послідовні етапи для `run_data_pipeline.py`.
    *   **Структура:** `stage_0_...` (налаштування), `stage_1_...` (збір даних), `stage_2_...` (розрахунок ознак). Ця структура замінює собою десятки старих файлів.
*   `core/tools/`:
    *   **Призначення:** Ізольована, потужна логіка для симуляцій та аналізу. Це "мозок" нових скриптів-оркестраторів.
    *   **Ключові файли:** `dual_path_simulator.py`, `robust_feature_simulator.py`, `convergence_analyzer.py`.

**3. Конфігурація (`config`):**

*   `config/config.py`:
    *   **Призначення:** **Єдиний центр конфігурації.** Всі параметри, шляхи, налаштування моделей, списки ознак знаходяться тут. Більше ніяких "магічних" чисел у коді.
*   `config/feature_sets.py`:
    *   **Призначення:** Допоміжний файл для організації груп ознак, що використовуються в експериментах.

**4. Дані (`data`):**

*   **Призначення:** Стандартизована структура для зберігання даних на всіх етапах.
*   **Структура:**
    *   `data/raw`: Необроблені, початкові дані.
    *   `data/processed`: Датасети, готові для моделювання (вихід `run_data_pipeline.py`).
    *   `data/metadata`: Допоміжна інформація (напр., словники).
    *   `data/models`: Збережені моделі.
    *   `data/results`: Результати симуляцій та аналізу.

---

Ця архітектура є чистою, модульною та легко розширюваною. Всі старі папки (`core/analysis`, `core/pipeline` і т.д.) та скрипти є застарілими і підлягають видаленню.
